<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Alpha</title>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="msapplication-tap-highlight" content="no" />
  <meta name="theme-color" content="#2d2d2d" />
  <meta
    name="viewport"
    content="user-scalable=yes, initial-scale=1.0, maximum-scale=10.0, width=device-width"
    />
  <style>
    html {
      font-size: 18px;
      margin: 0;
    }
    body {
      -webkit-tap-highlight-color: transparent;
      box-sizing: border-box;
      margin: 0;
      padding: 0.5rem 0;
      background: #2d2d2d; 
      color: #cdcdcd;
      font-family: sans-serif;
      font-size: 1rem;
    }
    article {
      display: grid;
      grid-template-columns: 1fr minmax(10rem, 45rem) 1fr;
      box-sizing: border-box;
    }
    section {
      grid-column: 2;
      margin: 0.5rem 1rem;
      padding: 0.75rem 1rem;
      background: rgba(55, 55, 55, 0.4); 
      box-shadow: 0 0 10px 2px rgba(15, 15, 15, 0.6);
      cursor: pointer;
    }
  </style>
</head>
<body>
  <article id="tasks"></article> 
  <script>
    const toggleOpacity = element => {
      console.log(element.style.opacity)
      element.style.opacity = element.style.opacity === "0.3" ? 1 : 0.3;
    }

    fetch("/list")
      .then(res => res.text())
      .then(tasks => {
        const sections = tasks
          .split(/\r?\n/)
          .filter(task => task)
          .map(task => `<section onclick="toggleOpacity(this)">${task}</section>`);

        document.getElementById("tasks").innerHTML = sections.join("");
      });
  </script>
</body>
</html>
